@model AlphaFacev2.Models.Profile

@inject AlphaFacev2.Services.AccountServices  accountServices

@{
    ViewData["Title"] = "Details";
}

@*<h1>Details</h1>*@

<div>
    <h4>@Model.FirstName's Profile</h4>
    <hr />
    <div class="column" style="width:400px">
        <form id="profile-form" method="post">
            @{
                var user = accountServices.GetCurrentUser();

                if (user.ProfileImage == null)
                {
                    <div style="border:solid;border-color:dodgerblue;border-radius:10px; text-align:center; max-width:320px">
                        <a class="nav-link text-dark" asp-area="" asp-controller="Faces" asp-action="Compare">Do a AFace comparison using curent profile picture</a>
                    </div>
                }
                else
                {
                    <div style="border:solid;border-color:dodgerblue;border-radius:10px; text-align:center; max-width:320px">
                        <a class="nav-link text-dark" asp-area="" asp-controller="Faces" asp-action="Face">Upload your picture for AFace authentication</a>
                    </div>
                }
            }
            <br />
        </form>
        <dl class="row">
            <dt class="col-sm-4">
                @Html.DisplayNameFor(model => model.FirstName)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.FirstName)
            </dd>
            <dt class="col-sm-4">
                @Html.DisplayNameFor(model => model.LastName)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.LastName)
            </dd>
            <dt class="col-sm-4">
                @Html.DisplayNameFor(model => model.DateOfBirth)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.DateOfBirth)
            </dd>
            @*<dt class="col-sm-4">
                    @Html.DisplayNameFor(model => model.Gender)
                </dt>
                <dd class="col-sm-10">
                    @Html.DisplayFor(model => model.Gender)
                </dd>*@
            <dt class="col-sm-4">
                @Html.DisplayNameFor(model => model.Email)
            </dt>
            <dd class="col-sm-10">
                @Html.DisplayFor(model => model.Email)
            </dd>
            @*<dd class="col-sm-10">
                    @Html.DisplayFor(model => model.ProfileImage)
                </dd>*@
        </dl>
        <div>
            <a asp-action="Edit" asp-route-id="@Model.Id">Edit</a> |
            <a asp-action="Delete" asp-route-id="@Model.Id">Delete</a>
        </div>
    </div>
    <div class="column" style="width:60px"></div>
    <div class="column">
        @{
            byte[] byteArray = new byte[1];
            if (Model.ProfileImage == null)
            {
                byteArray[0] = 0;
            }
            else
            {
                byteArray = Model.ProfileImage;
            }
            var base64 = Convert.ToBase64String(byteArray);
            var imgSrc = String.Format("data:image/jpg;base64,{0}", base64);
        }
        <img src="@imgSrc" alt="Profile Picture" height="320" />
    </div>


</div>

